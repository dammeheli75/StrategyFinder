//+------------------------------------------------------------------+
//|                                                        Error.mqh |
//|                                         Created by Luu Hoang Nam |
//|                                              http://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright "Created by Luu Hoang Nam"
#property link      "http://www.mql5.com"
//+------------------------------------------------------------------+
//|                                                                  |
//+------------------------------------------------------------------+
#include <Object.mqh>
#include <Arrays\ArrayObj.mqh>
//+------------------------------------------------------------------+
//|                                                                  |
//+------------------------------------------------------------------+
class Error: public CObject
  {
protected:
   int               m_code;
   string            m_reason;
   CArrayObj         m_errors;
   int               Code(void);

public:
                     Error(void);
                    ~Error(void);
   bool              DefineError(int code,string reason="");
   string            Reason(void);
   string            Reason(int code);
  };
//+------------------------------------------------------------------+
//|                                                                  |
//+------------------------------------------------------------------+
Error::Error(void)
  {
  }
//+------------------------------------------------------------------+
//|                                                                  |
//+------------------------------------------------------------------+
Error::~Error(void)
  {
  }
//+------------------------------------------------------------------+
//|                                                                  |
//+------------------------------------------------------------------+
bool Error::DefineError(int code,string reason="")
  {
   Error *error=new Error();
   error.m_code= code;
   error.m_reason=reason;

   return(m_errors.Add(error));
  }
//+------------------------------------------------------------------+
//|                                                                  |
//+------------------------------------------------------------------+
int Error::Code(void)
  {
   return(m_code);
  }
//+------------------------------------------------------------------+
//|                                                                  |
//+------------------------------------------------------------------+
string Error::Reason(void)
  {
   return(m_reason);
  }
//+------------------------------------------------------------------+
//|                                                                  |
//+------------------------------------------------------------------+
string Error::Reason(int code)
  {
   for(int i=0;i<m_errors.Total();i++)
     {
      Error *error=m_errors.At(i);
      if(error.Code()==code)
        {
         return(error.Reason());
        }
     }
   return("");
  }
//+------------------------------------------------------------------+
